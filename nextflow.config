params {
    // input
    table = null
    sample_metadata = null
    feature_metadata = null
    // heatmap
    rows_dendrogram = true
    columns_dendrogram = true
    // output
    out_dir = "output"
    // additional
    help = false
    version = false
    monochrome_logs = false
    validate_params = true
    show_hidden_params = false
    schema_ignore_params = 'show_hidden_params,validate_params,monochrome_logs,wf'
    wf {
        example_cmd = [
            "--profile standard --table wf-heatmap-demo/test_data --sample_metadata wf-heatmap-demo/sample_metadata.tsv --feature_metadata wf-heatmap-demo/feature_metadata.tsv"
        ]
    }
}

profiles {
    test {
        params {
            table = "${projectDir}/wf-heatmap-demo/test_data"
            sample_metadata = "${projectDir}/wf-heatmap-demo/sample_metadata.tsv"
            feature_metadata = "${projectDir}/wf-heatmap-demo/feature_metadata.tsv"
        }
    }
    standard {
        docker {
            enabled = true
            runOptions = "--user \$(id -u):\$(id -g) --group-add 100"
        }
        process {
            withLabel: miller {
                container = "ghcr.io/danpal96/miller:6.15.0"
            }
            withLabel: r_env {
                container = "ghcr.io/danpal96/r-env:0.1.0"
            }
        }
    }
}

manifest {
    name = 'danpal96/wf-heatmap'
    author = 'Daniel Esteban Palma Igor'
    homePage = 'https://github.com/danpal96/wf-heatmap'
    description = 'Workflow to create heatmaps'
    mainScript = 'main.nf'
    nextflowVersion = '>=23'
    version = 'v0.1.0'
}

timeline {
    enabled = true
    overwrite = true
    file = "${params.out_dir}/execution/timeline.html"
}
report {
    enabled = true
    overwrite = true
    file = "${params.out_dir}/execution/report.html"
}
trace {
    enabled = true
    overwrite = true
    file = "${params.out_dir}/execution/trace.txt"
}
